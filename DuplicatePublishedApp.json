{"blocks":[{"id":"FA41B9F7-9746-4DF8-9AFD-BFA858CBE474","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"3818847B-86FD-43F1-8F8D-6DCAC7C3FA5F","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":0},{"id":"3818847B-86FD-43F1-8F8D-6DCAC7C3FA5F","type":"FormBlock","disabled":false,"name":"inputs","displayName":"Inputs","comment":"","childId":"7F31FC93-6179-4B9B-87DE-281F1E6B8EB1","inputs":[],"settings":[{"id":"persist_data","value":"yes","type":"select","displayValue":"Yes","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-319,"y":86,"form":[{"id":"inputs-input-0","label":"App ID","helpText":"Input the App ID you want to duplicate","type":"input","values":null,"isRequired":true,"options":{},"order":0}],"persistData":"yes"},{"id":"4552ACD1-4A23-401D-9E01-A0A613DBCEE8","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest","displayName":"Qlik Cloud Services - Raw API Request","comment":"Remove space - puts in personal area","childId":"00C9F184-A8A0-451A-84D2-386860E16F5B","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"apps/{$.vOriginalAppId}/space","type":"string","structure":{}},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba24260-2072-11ec-af76-279950b1986c","type":"select","displayValue":"PUT","structure":{}},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"spaceId","value":""}],"type":"object","mode":"keyValue","structure":{}},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":1440,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"00C9F184-A8A0-451A-84D2-386860E16F5B","type":"EndpointBlock","disabled":false,"name":"copyApp","displayName":"Qlik Cloud Services - Copy App","comment":"","childId":"6CB1052F-B6D4-4F47-9DE5-42E7233AD2BD","inputs":[{"id":"97322d20-5f1a-11eb-b60f-c78b64a85ca9","value":"{$.vOriginalAppId}","type":"string","structure":{}},{"id":"973a0420-5f1a-11eb-992c-4faefbbdefcb","value":null,"type":"string","structure":{}},{"id":"b4719c30-5f1a-11eb-8f7c-05d48bd9af1f","value":"Copy of {$.rawAPIRequest.attributes.name}","type":"string","structure":{}},{"id":"c0a48ba0-5f1a-11eb-8b6b-a71406d285c9","value":null,"type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-313,"y":272,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"971da4c0-5f1a-11eb-b024-5bdf8a364659","endpoint_role":"update"},{"id":"6CB1052F-B6D4-4F47-9DE5-42E7233AD2BD","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest2","displayName":"Qlik Cloud Services - Raw API Request 2","comment":"Put back in original space","childId":"4F2D4EAF-F977-495F-8CC6-D41438E3AB39","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"apps/{$.vOriginalAppId}/space","type":"string","structure":{}},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"PUT","type":"select","structure":{}},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"spaceId","value":"{$.vOriginalSpaceId}"}],"type":"object","mode":"keyValue","structure":{}},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-306,"y":102,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"7F31FC93-6179-4B9B-87DE-281F1E6B8EB1","type":"VariableBlock","disabled":false,"name":"vOriginalAppId","displayName":"Variable - vOriginalAppId","comment":"","childId":"A9B63D54-F647-452C-9E68-087BFAB6E851","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-307,"y":215,"variableGuid":"E831FB6A-D7AF-4CD9-AB1D-4D448D852D7C","operations":[{"key":"2E74FA6E-42FC-4093-901B-49A857779B25","id":"set_value","name":"Set value of { variable }","value":"{$.inputs.'App ID'}"}]},{"id":"A9B63D54-F647-452C-9E68-087BFAB6E851","type":"SnippetBlock","disabled":false,"name":"GetAppInformation","displayName":"Qlik Cloud Services - Get App Information","comment":"","childId":"5A1437D5-146B-4376-8708-75B0439F6357","inputs":[{"id":"d3acbdc0-a8d2-11eb-8827-056900eab788","value":"{$.vOriginalAppId}","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":360,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"d3a8d4f0-a8d2-11eb-a81d-ffabb68491fb"},{"id":"5A1437D5-146B-4376-8708-75B0439F6357","type":"VariableBlock","disabled":false,"name":"vOriginalSpaceId","displayName":"Variable - vOriginalSpaceId","comment":"","childId":"5534D380-32D9-4FE9-8333-2BE679AE2F62","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":1038,"y":233,"variableGuid":"5628D976-C031-427F-9CD2-41E9C88A4D04","operations":[{"key":"9062F325-5E2B-43CC-B5F4-317A4FAE4C8E","id":"set_value","name":"Set value of { variable }","value":"{$.GetAppInformation.info.attributes.spaceId}"}]},{"id":"F4940B6C-4A79-4A65-99B8-7C4F6B71613A","type":"EndpointBlock","disabled":false,"name":"getCurrentUserId","displayName":"Qlik Cloud Services - Get Current User Id","comment":"","childId":"BD76D611-B74C-41D6-9DC2-6EFB63B0CBEF","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":534,"y":532,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9","endpoint_role":"get"},{"id":"5534D380-32D9-4FE9-8333-2BE679AE2F62","type":"VariableBlock","disabled":false,"name":"vOriginalOwnerId","displayName":"Variable - vOriginalOwnerId","comment":"","childId":"F4940B6C-4A79-4A65-99B8-7C4F6B71613A","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":534,"y":652,"variableGuid":"FA22F41E-DDA8-4C67-884D-416A351E630A","operations":[{"key":"E69E1A3C-7164-413D-B3A2-C457D04744BD","id":"set_value","name":"Set value of { variable }","value":"{$.GetAppInformation.info.attributes.ownerId}"}]},{"id":"BD76D611-B74C-41D6-9DC2-6EFB63B0CBEF","type":"VariableBlock","disabled":false,"name":"vCurrentUserId","displayName":"Variable - vCurrentUserId","comment":"","childId":"BCE8430F-E7F6-4C7D-A22B-8E24197FEC25","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-369,"y":416,"variableGuid":"EDC478A8-072C-4C03-AC24-BE6ADDF37984","operations":[{"key":"37AD0B90-0705-4E1E-B07E-BFF5532774A2","id":"set_value","name":"Set value of { variable }","value":"{$.getCurrentUserId}"}]},{"id":"BCE8430F-E7F6-4C7D-A22B-8E24197FEC25","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest3","displayName":"Qlik Cloud Services - Raw API Request 3","comment":"Make current user the owner","childId":"3433823F-29B9-4438-BA9E-9EFFD2091743","inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"apps/{$.vOriginalAppId}/owner","type":"string","structure":{}},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"3ba24260-2072-11ec-af76-279950b1986c","type":"select","displayValue":"PUT","structure":{}},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"ownerId","value":"{$.vCurrentUserId}"}],"type":"object","mode":"keyValue","structure":{}},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-268,"y":280,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"4F2D4EAF-F977-495F-8CC6-D41438E3AB39","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest4","displayName":"Qlik Cloud Services - Raw API Request 4","comment":"Make original user the owner again","childId":null,"inputs":[{"id":"4add8960-2078-11ec-be2c-7fc55d771fe6","value":"apps/{$.vOriginalAppId}/owner","type":"string","structure":{}},{"id":"3b992a40-2072-11ec-9f0e-ed01586a7e1b","value":"PUT","type":"select","structure":{}},{"id":"3b8b9090-2072-11ec-8c77-5195fbb0ca65","value":[{"key":"ownerId","value":"{$.vOriginalOwnerId}"}],"type":"object","mode":"keyValue","structure":{}},{"id":"993585d0-2839-11ec-b431-df4deed6c1ae","value":null,"type":"object","mode":"keyValue","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-265,"y":585,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"3b75dd80-2072-11ec-9043-3b2aff6123af","endpoint_role":"get"},{"id":"3433823F-29B9-4438-BA9E-9EFFD2091743","type":"SnippetBlock","disabled":false,"name":"GetAppInformation2","displayName":"Qlik Cloud Services - Get App Information 2","comment":"Get App Info to check owner is now current user","childId":"23DDE001-4B2F-42E4-815D-69E50323792A","inputs":[{"id":"d3acbdc0-a8d2-11eb-8827-056900eab788","value":"{$.vOriginalAppId}","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":250,"y":360,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"d3a8d4f0-a8d2-11eb-a81d-ffabb68491fb"},{"id":"23DDE001-4B2F-42E4-815D-69E50323792A","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.GetAppInformation2.info.attributes.ownerId}","operator":"!=","input2":"{$.vCurrentUserId}"}]},"type":"custom","structure":{}}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-280,"y":733,"childTrueId":"1E692914-F087-481F-9750-55C7B44BB671","childFalseId":"4552ACD1-4A23-401D-9E01-A0A613DBCEE8"},{"id":"1E692914-F087-481F-9750-55C7B44BB671","type":"ErrorBlock","disabled":false,"name":"error","displayName":"Error","comment":"Could not change owner of app","childId":null,"inputs":[{"id":"message","value":"Could not change owner of app","type":"string","structure":{}},{"id":"action","value":"stop","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-352,"y":1509}],"variables":[{"guid":"E831FB6A-D7AF-4CD9-AB1D-4D448D852D7C","name":"vOriginalAppId","type":"string"},{"guid":"5628D976-C031-427F-9CD2-41E9C88A4D04","name":"vOriginalSpaceId","type":"string"},{"guid":"EDC478A8-072C-4C03-AC24-BE6ADDF37984","name":"vCurrentUserId","type":"string"},{"guid":"FA22F41E-DDA8-4C67-884D-416A351E630A","name":"vOriginalOwnerId","type":"string"}]}